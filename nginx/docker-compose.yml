version: '3.2'
services:
  envoy:
    image: envoyproxy/envoy:latest
    ports:
    - 8000:80
    - 8001:8001
    volumes:
    - ./envoy/envoy.yaml:/etc/envoy/envoy.yaml:ro
    depends_on:
    - hello
  nginx:
    image: nginx:latest
    ports:
    - 9000:80
    volumes:
    - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
    - hello
  hello:
    build:
      context: hello
    ports:
    - 5000:5000